import{a as K,_ as O,b as I,c as ve,L as ge,d as be,e as me,f as te,u as ye,l as ne,g as V,R as ke,D as xe}from"./index.ed1369b5.js";import{F as Se}from"./index.0681e571.js";import{aS as we,d as R,c as k,e as P,i as Ce,aG as w,A as m,B as z,E as v,aH as o,aF as a,u as f,aC as S,aD as T,aL as oe,aI as ae,aJ as se,aK as U,b6 as q,b7 as H,b9 as $e,b2 as De,b1 as Le,ba as Ee,bb as ce,bc as ue,bd as Me,be as Te,bf as Ie,h as Q,bg as X,bh as Re,bi as Be,bj as Fe,C as re,w as le,bk as Ae,o as Pe,bl as ze,bm as Oe,bn as Y,bo as Ne,bp as je,p as Ue,bq as Ke,br as Ve,D as Z,bs as qe,bt as He,bu as We,bv as Je}from"./arco.1db1f704.js";import{u as N,g as Ge,h as Qe,i as Xe,j as W,k as Ye}from"./vue.bbd05113.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import"./chart.520624f6.js";function Ze(){const n=N(),t=K();return{logout:async r=>{await t.logout();const l=n.currentRoute.value;we.success("\u767B\u51FA\u6210\u529F"),n.push({name:r&&typeof r=="string"?r:"login",query:{...n.currentRoute.value.query,redirect:l.name}})}}}const et=n=>(q("data-v-4b210696"),n=n(),H(),n),tt={class:"navbar"},nt={class:"left-side"},ot=et(()=>v("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"},null,-1)),at=se("Ocelot Admin"),st={class:"right-side"},ct=["src"],ut=R({setup(n){const t=I(),u=K(),{logout:r}=Ze(),{changeLocale:l}=ve(),{isFullscreen:y,toggle:d}=Ge(),h=[...ge],D=k(()=>u.avatar),p=k(()=>t.theme),C=Qe({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(i){t.toggleTheme(i)}}),$=Xe(C),s=()=>{$()},g=P(),c=()=>{r()},e=()=>{const i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});g.value.dispatchEvent(i)},_=Ce("toggleDrawerMenu");return(i,b)=>{const x=$e,L=w("icon-menu-fold"),M=De,E=w("icon-language"),F=Le,A=Ee,J=ce,G=ue,ie=w("icon-moon-fill"),de=w("icon-sun-fill"),pe=w("icon-fullscreen-exit"),_e=w("icon-fullscreen"),fe=Me,he=w("icon-export");return m(),z("div",tt,[v("div",nt,[o(M,null,{default:a(()=>[ot,o(x,{heading:5,style:{margin:0,fontSize:"18px"}},{default:a(()=>[at]),_:1}),f(t).device==="mobile"?(m(),S(L,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:f(_)},null,8,["onClick"])):T("",!0)]),_:1})]),v("ul",st,[v("li",null,[o(A,{content:i.$t("settings.language")},{default:a(()=>[o(F,{shape:"circle",class:"nav-btn",type:"outline",onClick:e},{icon:a(()=>[o(E)]),_:1})]),_:1},8,["content"]),o(G,{trigger:"click",onSelect:f(l)},{content:a(()=>[(m(),z(oe,null,ae(h,j=>o(J,{key:j.value,value:j.value},{default:a(()=>[se(U(j.label),1)]),_:2},1032,["value"])),64))]),default:a(()=>[v("div",{ref_key:"triggerBtn",ref:g,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),v("li",null,[o(A,{content:f(p)==="light"?i.$t("settings.navbar.theme.toDark"):i.$t("settings.navbar.theme.toLight")},{default:a(()=>[o(F,{shape:"circle",class:"nav-btn",type:"outline",onClick:s},{icon:a(()=>[f(p)==="dark"?(m(),S(ie,{key:0})):(m(),S(de,{key:1}))]),_:1})]),_:1},8,["content"])]),v("li",null,[o(A,{content:f(y)?i.$t("settings.navbar.screen.toExit"):i.$t("settings.navbar.screen.toFull")},{default:a(()=>[o(F,{shape:"circle",class:"nav-btn",type:"outline",onClick:f(d)},{icon:a(()=>[f(y)?(m(),S(pe,{key:0})):(m(),S(_e,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),v("li",null,[o(G,{trigger:"click"},{content:a(()=>[o(J,null,{default:a(()=>[o(M,{onClick:c},{default:a(()=>[o(he),v("span",null,U(i.$t("messageBox.logout")),1)]),_:1})]),_:1})]),default:a(()=>[o(fe,{size:32,style:{marginRight:"8px",cursor:"pointer"}},{default:a(()=>[v("img",{src:f(D),alt:"avatar"},null,8,ct)]),_:1})]),_:1})])])])}}});var rt=O(ut,[["__scopeId","data-v-4b210696"]]);const lt=(n,t)=>{const{target:u="_blank",...r}=t||{};window.open(n,u,Object.entries(r).reduce((l,y)=>{const[d,h]=y;return[...l,`${d}=${h}`]},[]).join(","))},it=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),dt=[...be,...me],pt=dt.map(n=>{const{name:t,path:u,meta:r,redirect:l,children:y}=n;return{name:t,path:u,meta:r,redirect:l,children:y}});function _t(){const n=te(),t=I(),u=k(()=>t.menuFromServer?t.appAsyncMenus:pt);return{menuTree:k(()=>{const l=JSON.parse(JSON.stringify(u.value));l.sort((d,h)=>(d.meta.order||0)-(h.meta.order||0));function y(d,h){return d?d.map(p=>{var $,s;if(!n.accessRouter(p))return null;if((($=p.meta)==null?void 0:$.hideChildrenInMenu)||!p.children)return p.children=[],p;p.children=p.children.filter(g=>{var c;return((c=g.meta)==null?void 0:c.hideInMenu)!==!0});const C=y(p.children,h+1);return C.length||h>1?(p.children=C,p):((s=p.meta)==null?void 0:s.hideInMenu)===!1?p:null}).filter(Boolean):null}return y(l,0)})}}function ft(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Te(n)}var ht=R({emit:["collapse"],setup(){const{t:n}=ye(),t=I(),u=N(),r=W(),{menuTree:l}=_t(),y=k({get(){return t.device==="desktop"?t.menuCollapse:!1},set(s){t.updateSettings({menuCollapse:s})}}),d=P([]),h=P([]),D=s=>{if(it.test(s.path)){lt(s.path),h.value=[s.name];return}const{hideInMenu:g,activeMenu:c}=s.meta;if(r.name===s.name&&!g&&!c){h.value=[s.name];return}u.push({name:s.name})},p=s=>{const g=[];let c=!1;const e=(_,i,b)=>{var x;if(_.name===b){c=!0,g.push(...i,_.name);return}(x=_.children)!=null&&x.length&&_.children.forEach(L=>{e(L,[...i],b)})};return l.value.forEach(_=>{c||e(_,[_.name],s)}),g};ne(s=>{const{requiresAuth:g,activeMenu:c,hideInMenu:e}=s.meta;if(g&&(!e||c)){const _=p(c||s.name),i=new Set([..._,...d.value]);d.value=[...i],h.value=[c||_[_.length-1]]}},!0);const C=s=>{t.device==="desktop"&&t.updateSettings({menuCollapse:s})},$=()=>{function s(g,c=[]){return g&&g.forEach(e=>{var b;const _=(b=e==null?void 0:e.meta)!=null&&b.icon?()=>{var x;return Q(X(`<${(x=e==null?void 0:e.meta)==null?void 0:x.icon}/>`))}:null,i=(e==null?void 0:e.children)&&(e==null?void 0:e.children.length)!==0?o(Re,{key:e==null?void 0:e.name},{default:()=>[s(e==null?void 0:e.children)],icon:_,title:()=>{var x;return Q(X(n(((x=e==null?void 0:e.meta)==null?void 0:x.locale)||"")))}}):o(Be,{key:e==null?void 0:e.name,onClick:()=>D(e)},{default:()=>{var x;return[n(((x=e==null?void 0:e.meta)==null?void 0:x.locale)||"")]},icon:_});c.push(i)}),c}return s(l.value)};return()=>{let s;return o(Ie,{collapsed:y.value,"onUpdate:collapsed":g=>y.value=g,"open-keys":d.value,"onUpdate:open-keys":g=>d.value=g,"show-collapse-button":t.device!=="mobile","auto-open":!0,"selected-keys":h.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%",onCollapse:C},ft(s=$())?s:{default:()=>[s]})}}});var ee=O(ht,[["__scopeId","data-v-72253e70"]]);const B=n=>(q("data-v-bacf4444"),n=n(),H(),n),vt={class:"tag-link"},gt=B(()=>v("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1)),bt=B(()=>v("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1)),mt=B(()=>v("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1)),yt=B(()=>v("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1)),kt=B(()=>v("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1)),xt=B(()=>v("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1)),St=R({props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(n){const t=n,u=N(),r=W(),l=V(),y=c=>{u.push({...c})},d=k(()=>l.getTabList),h=k(()=>t.itemData.fullPath!==r.fullPath),D=k(()=>t.index===0),p=k(()=>[0,1].includes(t.index)),C=k(()=>t.index===d.value.length-1),$=(c,e)=>{if(l.deleteTag(e,c),t.itemData.fullPath===r.fullPath){const _=d.value[e-1];u.push({name:_.name})}},s=()=>d.value.findIndex(c=>c.fullPath===r.fullPath),g=async c=>{const{itemData:e,index:_}=t,i=[...d.value];if(c==="current")$(e,_);else if(c==="left"){const b=s();i.splice(1,t.index-1),l.freshTabList(i),b<_&&u.push({name:e.name})}else if(c==="right"){const b=s();i.splice(t.index+1),l.freshTabList(i),b>_&&u.push({name:e.name})}else if(c==="others"){const b=d.value.filter((x,L)=>L===0||L===t.index);l.freshTabList(b),u.push({name:e.name})}else c==="reload"?(l.deleteCache(e),await u.push({name:ke,params:{path:r.fullPath}}),l.addCache(e.name)):(l.resetTabList(),u.push({name:xe}))};return(c,e)=>{const _=w("icon-close"),i=w("icon-refresh"),b=ce,x=w("icon-to-left"),L=w("icon-to-right"),M=w("icon-swap"),E=w("icon-folder-delete"),F=ue;return m(),S(F,{trigger:"contextMenu","popup-max-height":!1,onSelect:g},{content:a(()=>[o(b,{disabled:f(h),value:"reload"},{default:a(()=>[o(i),gt]),_:1},8,["disabled","value"]),o(b,{class:"sperate-line",disabled:f(D),value:"current"},{default:a(()=>[o(_),bt]),_:1},8,["disabled","value"]),o(b,{disabled:f(p),value:"left"},{default:a(()=>[o(x),mt]),_:1},8,["disabled","value"]),o(b,{class:"sperate-line",disabled:f(C),value:"right"},{default:a(()=>[o(L),yt]),_:1},8,["disabled","value"]),o(b,{value:"others"},{default:a(()=>[o(M),kt]),_:1},8,["value"]),o(b,{value:"all"},{default:a(()=>[o(E),xt]),_:1},8,["value"])]),default:a(()=>[v("span",{class:re(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":n.itemData.fullPath===c.$route.fullPath}]),onClick:e[1]||(e[1]=A=>y(n.itemData))},[v("span",vt,U(c.$t(n.itemData.title)),1),v("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:e[0]||(e[0]=Fe(A=>$(n.itemData,n.index),["stop"]))},[o(_)])],2)]),_:1})}}});var wt=O(St,[["__scopeId","data-v-bacf4444"]]);const Ct=n=>(q("data-v-7944854e"),n=n(),H(),n),$t={class:"tab-bar-container"},Dt={class:"tab-bar-box"},Lt={class:"tab-bar-scroll"},Et={class:"tags-wrap"},Mt=Ct(()=>v("div",{class:"tag-bar-operation"},null,-1)),Tt=R({setup(n){const t=I(),u=V(),r=P(),l=k(()=>u.getTabList),y=k(()=>t.navbar?60:0);return le(()=>t.navbar,()=>{r.value.updatePosition()}),ne(d=>{!d.meta.noAffix&&!l.value.some(h=>h.fullPath===d.fullPath)&&u.updateTabList(d)},!0),(d,h)=>{const D=Ae;return m(),z("div",$t,[o(D,{ref_key:"affixRef",ref:r,"offset-top":f(y)},{default:a(()=>[v("div",Dt,[v("div",Lt,[v("div",Et,[(m(!0),z(oe,null,ae(f(l),(p,C)=>(m(),S(wt,{key:p.fullPath,index:C,"item-data":p},null,8,["index","item-data"]))),128))])]),Mt])]),_:1},8,["offset-top"])])}}});var It=O(Tt,[["__scopeId","data-v-7944854e"]]);function Rt(n,t,u,r=!1){n.addEventListener&&typeof n.addEventListener=="function"&&n.addEventListener(t,u,r)}function Bt(n,t,u,r=!1){n.removeEventListener&&typeof n.removeEventListener=="function"&&n.removeEventListener(t,u,r)}const Ft=992;function At(){return document.body.getBoundingClientRect().width-1<Ft}function Pt(n){const t=I();function u(){if(!document.hidden){const l=At();t.toggleDevice(l?"mobile":"desktop"),t.toggleMenu(l)}}const r=Ye(u,100);Pe(()=>{n&&r()}),ze(()=>{Rt(window,"resize",r)}),Oe(()=>{Bt(window,"resize",r)})}const zt=R({setup(n){const t=V(),u=k(()=>t.getCacheList);return(r,l)=>{const y=w("router-view");return m(),S(y,null,{default:a(({Component:d,route:h})=>[o(je,{name:"fade",mode:"out-in",appear:""},{default:a(()=>[h.meta.ignoreCache?(m(),S(Y(d),{key:h.fullPath})):(m(),S(Ne,{key:1,include:f(u)},[(m(),S(Y(d),{key:h.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}});const Ot={key:0,class:"layout-navbar"},Nt={class:"menu-wrapper"},jt=R({setup(n){const t=I(),u=K(),r=N(),l=W(),y=te();Pt(!0);const d="60px",h=k(()=>t.navbar),D=k(()=>t.menu),p=k(()=>t.hideMenu),C=k(()=>t.footer),$=k(()=>t.menuCollapse?48:t.menuWidth),s=k(()=>t.menuCollapse),g=k(()=>{const i=D.value&&!p.value?{paddingLeft:`${$.value}px`}:{},b=h.value?{paddingTop:d}:{};return{...i,...b}}),c=i=>{t.updateSettings({menuCollapse:i})};le(()=>u.role,i=>{i&&!y.accessRouter(l)&&r.push({name:"notFound"})});const e=P(!1),_=()=>{e.value=!1};return Ue("toggleDrawerMenu",()=>{e.value=!e.value}),(i,b)=>{const x=qe,L=He,M=We,E=Je;return m(),S(E,{class:re(["layout",{mobile:f(t).hideMenu}])},{default:a(()=>[f(h)?(m(),z("div",Ot,[o(rt)])):T("",!0),o(E,null,{default:a(()=>[o(E,null,{default:a(()=>[f(D)?Ke((m(),S(x,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:f(s),collapsible:!0,width:f($),style:Z({paddingTop:f(h)?"60px":""}),"hide-trigger":!0,onCollapse:c},{default:a(()=>[v("div",Nt,[o(ee)])]),_:1},8,["collapsed","width","style"])),[[Ve,!f(p)]]):T("",!0),f(p)?(m(),S(L,{key:1,visible:e.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:_},{default:a(()=>[o(ee)]),_:1},8,["visible"])):T("",!0),o(E,{class:"layout-content",style:Z(f(g))},{default:a(()=>[f(t).tabBar?(m(),S(It,{key:0})):T("",!0),o(M,null,{default:a(()=>[o(zt)]),_:1}),f(C)?(m(),S(Se,{key:1})):T("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});var Yt=O(jt,[["__scopeId","data-v-6b83a758"]]);export{Yt as default};
