import{_ as Y,u as Z}from"./index.ed1369b5.js";import{u as ee}from"./loading.3f202aeb.js";import"./common.546a3b76.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as te,e as S,r as ae,c as le,aG as i,A as v,B as oe,aH as e,aF as a,u as $,aJ as u,aK as r,aC as q,aV as K,aS as y,a_ as ne,b4 as se,bx as de,bC as ie,bH as ue,b1 as re,b2 as me,b3 as pe,bD as ce,bE as _e,bF as be,bG as fe}from"./arco.1db1f704.js";import{g as w,a as ge,u as he,d as ve}from"./route.38f2fbdb.js";import{u as $e}from"./vue.bbd05113.js";import"./chart.520624f6.js";import"./ocelot-options.514ee915.js";const ye={class:"container"},we=te({setup(Te){const B=$e(),{loading:R,setLoading:T}=ee(!0),{t:n}=Z(),k=S([]),s=S(w()),m={page:1,pageSize:10},h=ae({...m}),D=le(()=>[{label:n("radio.enabled.label"),value:1},{label:n("radio.disabled.label"),value:2}]),_=async(t={...w(),page:1,pageSize:10,field:void 0,order:void 0})=>{T(!0);try{const{data:l}=await ge(t);k.value=l.items,h.page=t.page,h.total=l.total}catch{}finally{T(!1)}},H=()=>{m.page=1,_({...m,...s.value})},C=t=>{m.page=t,_({...m,...s.value})};_();const M=()=>{s.value=w(),C(m.page)},E=(t,l)=>{var f=l===1?2:1;K.warning({titleAlign:"start",title:n("modal.title"),content:n("gc.modal.content",{op:f}),okText:n("confirm"),cancelText:n("cancel"),hideCancel:!1,onOk:async()=>{var p=await he(t,f);p&&p.data?(y.success({content:n("submit.update.success"),duration:5*1e3}),_()):y.error({content:n("submit.update.fail"),duration:5*1e3})}})},x=t=>{B.push({name:"EditRoute",query:{id:t}})},F=t=>{K.warning({titleAlign:"start",title:n("modal.title",{op:1}),content:n("modal.delete.content"),okText:n("confirm"),cancelText:n("cancel"),hideCancel:!1,onOk:async()=>{var l=await ve(t);l&&l.data&&(_(),y.success({content:n("delete.success"),duration:5*1e3}))}})};return(t,l)=>{const f=i("Breadcrumb"),p=ne,g=se,b=de,U=ie,V=ue,A=i("icon-search"),c=re,O=i("icon-refresh"),G=i("icon-plus"),I=me,L=pe,P=ce,d=_e,N=be,J=i("icon-close"),j=i("icon-check"),Q=i("icon-edit"),W=i("icon-delete"),X=fe;return v(),oe("div",ye,[e(f,{items:["menu.route","menu.route.search"]},null,8,["items"]),e(P,{hoverable:""},{default:a(()=>[e(L,{model:s.value,layout:"horizontal","auto-label-width":""},{default:a(()=>[e(V,{gutter:{md:8,lg:24,xl:32}},{default:a(()=>[e(b,{sm:24,md:12,lg:8,xl:8,xxl:6},{default:a(()=>[e(g,{field:"downstreamPathTemplate",label:t.$t("route.downstream.path.template")},{default:a(()=>[e(p,{modelValue:s.value.downstreamPathTemplate,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.downstreamPathTemplate=o),placeholder:t.$t("routeTable.placeholder.downstream.path.template")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(b,{sm:24,md:12,lg:8,xl:8,xxl:6},{default:a(()=>[e(g,{field:"upstreamPathTemplate",label:t.$t("route.upstream.path.template")},{default:a(()=>[e(p,{modelValue:s.value.upstreamPathTemplate,"onUpdate:modelValue":l[1]||(l[1]=o=>s.value.upstreamPathTemplate=o),placeholder:t.$t("routeTable.placeholder.upstream.path.template")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(b,{sm:24,md:12,lg:8,xl:8,xxl:6},{default:a(()=>[e(g,{field:"RequestIdKey",label:t.$t("route.requestIdKey")},{default:a(()=>[e(p,{modelValue:s.value.requestIdKey,"onUpdate:modelValue":l[2]||(l[2]=o=>s.value.requestIdKey=o),placeholder:t.$t("routeTable.placeholder.route.requestIdKey")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(b,{sm:24,md:12,lg:8,xl:8,xxl:6},{default:a(()=>[e(g,{field:"status",label:t.$t("label.status")},{default:a(()=>[e(U,{modelValue:s.value.status,"onUpdate:modelValue":l[3]||(l[3]=o=>s.value.status=o),"allow-clear":"",options:$(D),placeholder:t.$t("select.options.default")},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(V,{gutter:{md:8,lg:24,xl:32}},{default:a(()=>[e(b,{sm:24,md:12,lg:8,xl:8,xxl:6},{default:a(()=>[e(I,{size:"medium"},{default:a(()=>[e(c,{type:"primary",onClick:H},{icon:a(()=>[e(A)]),default:a(()=>[u(" "+r(t.$t("routeTable.form.search")),1)]),_:1}),e(c,{onClick:M},{icon:a(()=>[e(O)]),default:a(()=>[u(" "+r(t.$t("routeTable.form.reset")),1)]),_:1}),e(c,{type:"primary",onClick:l[4]||(l[4]=o=>x(void 0))},{icon:a(()=>[e(G)]),default:a(()=>[u(" "+r(t.$t("table.operations.add")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(P,{style:{"margin-top":"8px"},size:"medium"},{default:a(()=>[e(X,{"row-key":"id",size:"small",loading:$(R),pagination:$(h),data:k.value,"column-resizable":"",class:"arco-table-border-cell",onPageChange:C},{columns:a(()=>[e(d,{title:t.$t("route.downstream.path.template"),"data-index":"downstreamPathTemplate"},null,8,["title"]),e(d,{title:t.$t("route.downstream.http.version"),"data-index":"downstreamHttpVersion"},null,8,["title"]),e(d,{title:t.$t("route.downstream.scheme"),"data-index":"downstreamScheme"},null,8,["title"]),e(d,{title:t.$t("route.upstream.path.template"),"data-index":"upstreamPathTemplate"},null,8,["title"]),e(d,{title:t.$t("route.upstream.http.method"),"data-index":"upstreamHttpMethod"},null,8,["title"]),e(d,{title:t.$t("route.requestIdKey"),"data-index":"requestIdKey"},null,8,["title"]),e(d,{title:t.$t("route.downstream.http.method"),"data-index":"downstreamHttpMethod"},null,8,["title"]),e(d,{title:t.$t("routeTable.columns.sort"),"data-index":"sort"},null,8,["title"]),e(d,{title:t.$t("routeTable.columns.status"),"data-index":"status"},{cell:a(({record:o})=>[e(N,{color:o.status===1?"blue":"orange"},{default:a(()=>[u(r(t.$t(`${o.status===1?"radio.enabled.label":"radio.disabled.label"}`)),1)]),_:2},1032,["color"])]),_:1},8,["title"]),e(d,{title:t.$t("table.operations"),"data-index":"operations"},{cell:a(({record:o})=>[e(I,null,{default:a(()=>[e(c,{type:"text",size:"mini",status:o.status===1?"warning":"success",onClick:z=>E(o.id,o.status)},{icon:a(()=>[o.status===1?(v(),q(J,{key:0})):(v(),q(j,{key:1}))]),default:a(()=>[u(" "+r(t.$t(`${o.status===1?"radio.disabled.label":"radio.enabled.label"}`)),1)]),_:2},1032,["status","onClick"]),e(c,{type:"text",size:"mini",onClick:z=>x(o.id)},{icon:a(()=>[e(Q)]),default:a(()=>[u(" "+r(t.$t("table.operations.edit")),1)]),_:2},1032,["onClick"]),e(c,{type:"text",size:"mini",status:"danger",onClick:z=>F(o.id)},{icon:a(()=>[e(W)]),default:a(()=>[u(" "+r(t.$t("table.operations.del")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["title"])]),_:1},8,["loading","pagination","data"])]),_:1})])}}});var Me=Y(we,[["__scopeId","data-v-6ee4b2bc"]]);export{Me as default};
